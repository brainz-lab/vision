<% content_for(:title) { "Baseline - #{@page&.name}" } %>

<div class="space-y-8">
  <div>
    <div class="mb-2">
      <%= link_to dashboard_project_baselines_path(@project), class: "btn-ghost text-sm" do %>
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
        Back to Baselines
      <% end %>
    </div>
    <div class="flex items-center justify-between">
      <div>
        <h1 class="section-header"><%= @page&.name || 'Baseline' %></h1>
        <p class="section-subheader"><%= @page&.path %></p>
      </div>
      <div class="flex items-center gap-2">
        <span class="badge badge-neutral">
          <%= @baseline.browser_config&.browser || 'chromium' %>
        </span>
        <span class="text-xs text-stone-500">
          <%= @baseline.browser_config&.viewport_width || 1280 %>x<%= @baseline.browser_config&.viewport_height || 720 %>
        </span>
      </div>
    </div>
  </div>

  <!-- Details -->
  <div class="card card-body">
    <dl class="grid grid-cols-2 md:grid-cols-4 gap-4">
      <div>
        <dt class="text-xs font-medium uppercase tracking-wider text-stone-500">Created</dt>
        <dd class="mt-1 text-sm font-medium text-stone-900"><%= @baseline.created_at.strftime('%b %d, %Y') %></dd>
      </div>
      <% if @baseline.approved_at %>
        <div>
          <dt class="text-xs font-medium uppercase tracking-wider text-stone-500">Approved</dt>
          <dd class="mt-1 text-sm font-medium text-stone-900"><%= @baseline.approved_at.strftime('%b %d, %Y') %></dd>
        </div>
      <% end %>
      <div>
        <dt class="text-xs font-medium uppercase tracking-wider text-stone-500">Browser</dt>
        <dd class="mt-1 text-sm font-medium text-stone-900"><%= @baseline.browser_config&.browser || 'chromium' %></dd>
      </div>
      <div>
        <dt class="text-xs font-medium uppercase tracking-wider text-stone-500">Viewport</dt>
        <dd class="mt-1 text-sm font-medium text-stone-900"><%= @baseline.browser_config&.viewport_width || 1280 %>x<%= @baseline.browser_config&.viewport_height || 720 %></dd>
      </div>
    </dl>
  </div>

  <!-- Baseline Image -->
  <div class="space-y-4">
    <h2 class="text-[15px] font-semibold text-stone-900">Baseline Image</h2>
    <div class="card overflow-hidden">
      <% if @baseline.screenshot&.attached? %>
        <%= image_tag public_storage_url(@baseline.screenshot), class: "w-full h-auto" %>
      <% else %>
        <div class="p-16 text-center bg-stone-50">
          <svg class="w-16 h-16 mx-auto mb-4 text-stone-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
          </svg>
          <p class="text-sm text-stone-500">No image available</p>
        </div>
      <% end %>
    </div>
  </div>
</div>
